<div class="page">
  <div class="hero">
    <div class="hero-inner">
      <h1>Blogs</h1>
      <p>
        Welcome to our Blogs. Here you will find the latest news, articles and guides.
      </p>

      <div class="hero-actions">
        <button mat-raised-button color="primary" [routerLink]="['/blogs/new']">
          New blog
        </button>
      </div>
    </div>
  </div>

  <div class="container">
    <mat-card class="state-card" *ngIf="loading">Uƒçitavanje blogova...</mat-card>

    <mat-card class="state-card" *ngIf="!loading && blogs.length === 0">
      No blogs yet.
    </mat-card>

    <div class="grid" *ngIf="!loading && blogs.length > 0">
      <mat-card 
        class="blog-card" 
        *ngFor="let b of blogs" 
        [routerLink]="['/blogs', b.id]"
        style="cursor: pointer;"
      >
        <div class="cover">
          <img
            [src]="(b.images && b.images.length > 0) ? b.images[0] : 'https://theroostingplace.blog/wp-content/uploads/2020/12/qi-bin-w4hbafegiac-unsplash.jpg'"
            alt="Blog image"
          />
        </div>

        <div class="card-body">
          <div class="top">
            <div class="title-block">
              <div class="title">{{ b.title }}</div>
              <div class="author" *ngIf="b.authorUsername">@{{ b.authorUsername }}</div>
            </div>

            <div class="date">
              {{ b.createdAt | date:'dd.MM.yyyy' }}
            </div>
          </div>

          <div class="desc">
            <markdown [data]="b.descriptionMarkdown || ''"></markdown>
          </div>
        </div>
      </mat-card>
    </div>
  </div>
</div>